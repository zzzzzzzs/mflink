var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var _a;
import { ChangeDetectorRef, Component, NgZone, SimpleChange, ApplicationInitStatus, } from '@angular/core';
import { TestBed, tick } from '@angular/core/testing';
import { By } from '@angular/platform-browser';
import { BrowserAnimationsModule, NoopAnimationsModule } from '@angular/platform-browser/animations';
import { Router } from '@angular/router';
import { RouterTestingModule } from '@angular/router/testing';
import { getQueriesForElement as dtlGetQueriesForElement, prettyDOM as dtlPrettyDOM, waitFor as dtlWaitFor, waitForElementToBeRemoved as dtlWaitForElementToBeRemoved, screen as dtlScreen, configure as dtlConfigure, } from '@testing-library/dom';
import { getConfig } from './config';
const mountedFixtures = new Set();
const inject = TestBed.inject || TestBed.get;
export function render(sut, renderOptions = {}) {
    return __awaiter(this, void 0, void 0, function* () {
        const _a = getConfig(), { dom: domConfig } = _a, globalConfig = __rest(_a, ["dom"]);
        const { detectChanges: detectChangesOnRender = true, declarations = [], imports = [], providers = [], schemas = [], queries, template = undefined, wrapper = WrapperComponent, componentProperties = {}, componentProviders = [], excludeComponentDeclaration = false, routes, removeAngularAttributes = false, defaultImports = [], } = Object.assign(Object.assign({}, globalConfig), renderOptions);
        dtlConfigure(Object.assign({ eventWrapper: (cb) => {
                const result = cb();
                detectChangesForMountedFixtures();
                return result;
            } }, domConfig));
        TestBed.configureTestingModule({
            declarations: addAutoDeclarations(sut, {
                declarations,
                excludeComponentDeclaration,
                template,
                wrapper,
            }),
            imports: addAutoImports({
                imports: imports.concat(defaultImports),
                routes,
            }),
            providers: [...providers],
            schemas: [...schemas],
        });
        if (componentProviders) {
            componentProviders
                .reduce((acc, provider) => acc.concat(provider), [])
                .forEach((p) => {
                const { provide } = p, provider = __rest(p, ["provide"]);
                TestBed.overrideProvider(provide, provider);
            });
        }
        const fixture = yield createComponentFixture(sut, { template, wrapper });
        setComponentProperties(fixture, { componentProperties });
        if (removeAngularAttributes) {
            fixture.nativeElement.removeAttribute('ng-version');
            const idAttribute = fixture.nativeElement.getAttribute('id');
            if (idAttribute && idAttribute.startsWith('root')) {
                fixture.nativeElement.removeAttribute('id');
            }
        }
        mountedFixtures.add(fixture);
        yield TestBed.compileComponents();
        let isAlive = true;
        fixture.componentRef.onDestroy(() => (isAlive = false));
        function detectChanges() {
            if (isAlive) {
                fixture.detectChanges();
            }
        }
        // Call ngOnChanges on initial render
        if (hasOnChangesHook(fixture.componentInstance)) {
            const changes = getChangesObj(null, componentProperties);
            fixture.componentInstance.ngOnChanges(changes);
        }
        if (detectChangesOnRender) {
            detectChanges();
        }
        const rerender = (rerenderedProperties) => {
            const changes = getChangesObj(fixture.componentInstance, rerenderedProperties);
            setComponentProperties(fixture, { componentProperties: rerenderedProperties });
            if (hasOnChangesHook(fixture.componentInstance)) {
                fixture.componentInstance.ngOnChanges(changes);
            }
            fixture.componentRef.injector.get(ChangeDetectorRef).detectChanges();
        };
        let router = routes ? inject(Router) : null;
        const zone = inject(NgZone);
        const navigate = (elementOrPath, basePath = '') => __awaiter(this, void 0, void 0, function* () {
            if (!router) {
                router = inject(Router);
            }
            const href = typeof elementOrPath === 'string' ? elementOrPath : elementOrPath.getAttribute('href');
            const [path, params] = (basePath + href).split('?');
            const queryParams = params
                ? params.split('&').reduce((qp, q) => {
                    const [key, value] = q.split('=');
                    // TODO(Breaking): group same keys qp[key] ? [...qp[key], value] : value
                    qp[key] = value;
                    return qp;
                }, {})
                : undefined;
            const navigateOptions = queryParams
                ? {
                    queryParams,
                }
                : undefined;
            const doNavigate = () => (navigateOptions ? router.navigate([path], navigateOptions) : router.navigate([path]));
            let result;
            if (zone) {
                yield zone.run(() => (result = doNavigate()));
            }
            else {
                result = doNavigate();
            }
            detectChanges();
            return result;
        });
        return Object.assign({ fixture,
            detectChanges,
            navigate,
            rerender, debugElement: typeof sut === 'string' ? fixture.debugElement : fixture.debugElement.query(By.directive(sut)), container: fixture.nativeElement, debug: (element = fixture.nativeElement, maxLength, options) => Array.isArray(element)
                ? element.forEach((e) => console.log(dtlPrettyDOM(e, maxLength, options)))
                : console.log(dtlPrettyDOM(element, maxLength, options)) }, replaceFindWithFindAndDetectChanges(dtlGetQueriesForElement(fixture.nativeElement, queries)));
    });
}
function createComponent(component) {
    return __awaiter(this, void 0, void 0, function* () {
        /* Make sure angular application is initialized before creating component */
        yield inject(ApplicationInitStatus).donePromise;
        return TestBed.createComponent(component);
    });
}
function createComponentFixture(sut, { template, wrapper }) {
    return __awaiter(this, void 0, void 0, function* () {
        if (typeof sut === 'string') {
            TestBed.overrideTemplate(wrapper, sut);
            return createComponent(wrapper);
        }
        if (template) {
            TestBed.overrideTemplate(wrapper, template);
            return createComponent(wrapper);
        }
        return createComponent(sut);
    });
}
function setComponentProperties(fixture, { componentProperties = {} }) {
    var _a;
    for (const key of Object.keys(componentProperties)) {
        const descriptor = Object.getOwnPropertyDescriptor(fixture.componentInstance.constructor.prototype, key);
        let _value = componentProperties[key];
        const defaultGetter = () => _value;
        const extendedSetter = (value) => {
            var _a;
            _value = value;
            (_a = descriptor === null || descriptor === void 0 ? void 0 : descriptor.set) === null || _a === void 0 ? void 0 : _a.call(fixture.componentInstance, _value);
            fixture.detectChanges();
        };
        Object.defineProperty(fixture.componentInstance, key, {
            get: (descriptor === null || descriptor === void 0 ? void 0 : descriptor.get) || defaultGetter,
            set: extendedSetter,
            // Allow the property to be defined again later.
            // This happens when the component properties are updated after initial render.
            // For Jest this is `true` by default, for Karma and a real browser the default is `false`
            configurable: true,
        });
        (_a = descriptor === null || descriptor === void 0 ? void 0 : descriptor.set) === null || _a === void 0 ? void 0 : _a.call(fixture.componentInstance, _value);
    }
    return fixture;
}
function hasOnChangesHook(componentInstance) {
    return ('ngOnChanges' in componentInstance && typeof componentInstance.ngOnChanges === 'function');
}
function getChangesObj(oldProps, newProps) {
    const isFirstChange = oldProps === null;
    return Object.keys(newProps).reduce((changes, key) => (Object.assign(Object.assign({}, changes), { [key]: new SimpleChange(isFirstChange ? null : oldProps[key], newProps[key], isFirstChange) })), {});
}
function addAutoDeclarations(sut, { declarations, excludeComponentDeclaration, template, wrapper, }) {
    if (typeof sut === 'string') {
        return [...declarations, wrapper];
    }
    const wrappers = () => (template ? [wrapper] : []);
    const components = () => (excludeComponentDeclaration ? [] : [sut]);
    return [...declarations, ...wrappers(), ...components()];
}
function addAutoImports({ imports, routes }) {
    const animations = () => {
        const animationIsDefined = imports.indexOf(NoopAnimationsModule) > -1 || imports.indexOf(BrowserAnimationsModule) > -1;
        return animationIsDefined ? [] : [NoopAnimationsModule];
    };
    const routing = () => (routes ? [RouterTestingModule.withRoutes(routes)] : []);
    return [...imports, ...animations(), ...routing()];
}
/**
 * Wrap waitFor to invoke the Angular change detection cycle before invoking the callback
 */
function waitForWrapper(detectChanges, callback, options) {
    return __awaiter(this, void 0, void 0, function* () {
        let inFakeAsync = true;
        try {
            tick(0);
        }
        catch (err) {
            inFakeAsync = false;
        }
        detectChanges();
        return yield dtlWaitFor(() => {
            setTimeout(() => detectChanges(), 0);
            if (inFakeAsync) {
                tick(0);
            }
            return callback();
        }, options);
    });
}
/**
 * Wrap waitForElementToBeRemovedWrapper to poke the Angular change detection cycle before invoking the callback
 */
function waitForElementToBeRemovedWrapper(detectChanges, callback, options) {
    return __awaiter(this, void 0, void 0, function* () {
        let cb;
        if (typeof callback !== 'function') {
            const elements = (Array.isArray(callback) ? callback : [callback]);
            const getRemainingElements = elements.map((element) => {
                let parent = element.parentElement;
                while (parent.parentElement) {
                    parent = parent.parentElement;
                }
                return () => (parent.contains(element) ? element : null);
            });
            cb = () => getRemainingElements.map((c) => c()).filter(Boolean);
        }
        else {
            cb = callback;
        }
        return yield dtlWaitForElementToBeRemoved(() => {
            const result = cb();
            detectChanges();
            return result;
        }, options);
    });
}
function cleanup() {
    mountedFixtures.forEach(cleanupAtFixture);
}
function cleanupAtFixture(fixture) {
    fixture.destroy();
    if (!fixture.nativeElement.getAttribute('ng-version') && fixture.nativeElement.parentNode === document.body) {
        document.body.removeChild(fixture.nativeElement);
    }
    mountedFixtures.delete(fixture);
}
// if we're running in a test runner that supports afterEach
// then we'll automatically run cleanup afterEach test
// this ensures that tests run in isolation from each other
// if you don't like this, set the ATL_SKIP_AUTO_CLEANUP env variable to 'true'
if (typeof process === 'undefined' || !((_a = process.env) === null || _a === void 0 ? void 0 : _a.ATL_SKIP_AUTO_CLEANUP)) {
    if (typeof afterEach === 'function') {
        afterEach(() => {
            cleanup();
        });
    }
}
// TODO: rename to `atl-wrapper-component`
// eslint-disable-next-line @angular-eslint/component-selector
class WrapperComponent {
}
WrapperComponent.decorators = [
    { type: Component, args: [{ selector: 'wrapper-component', template: '' },] }
];
/**
 * Wrap findBy queries to poke the Angular change detection cycle
 */
function replaceFindWithFindAndDetectChanges(originalQueriesForContainer) {
    return Object.keys(originalQueriesForContainer).reduce((newQueries, key) => {
        const getByQuery = originalQueriesForContainer[key.replace('find', 'get')];
        if (key.startsWith('find') && getByQuery) {
            newQueries[key] = (text, options, waitOptions) => __awaiter(this, void 0, void 0, function* () {
                // original implementation at https://github.com/testing-library/dom-testing-library/blob/main/src/query-helpers.js
                const result = yield waitForWrapper(detectChangesForMountedFixtures, () => getByQuery(text, options), waitOptions);
                return result;
            });
        }
        else {
            newQueries[key] = originalQueriesForContainer[key];
        }
        return newQueries;
    }, {});
}
/**
 * Call detectChanges for all fixtures
 */
function detectChangesForMountedFixtures() {
    mountedFixtures.forEach((fixture) => {
        try {
            fixture.detectChanges();
        }
        catch (err) {
            if (!err.message.startsWith('ViewDestroyedError')) {
                throw err;
            }
        }
    });
}
/**
 * Re-export screen with patched queries
 */
const screen = replaceFindWithFindAndDetectChanges(dtlScreen);
/**
 * Re-export waitFor with patched waitFor
 */
function waitFor(callback, options) {
    return __awaiter(this, void 0, void 0, function* () {
        return waitForWrapper(detectChangesForMountedFixtures, callback, options);
    });
}
/**
 * Re-export waitForElementToBeRemoved with patched waitForElementToBeRemoved
 */
function waitForElementToBeRemoved(callback, options) {
    return __awaiter(this, void 0, void 0, function* () {
        return waitForElementToBeRemovedWrapper(detectChangesForMountedFixtures, callback, options);
    });
}
/**
 * Manually export otherwise we get the following error while running Jest tests
 * TypeError: Cannot set property fireEvent of [object Object] which has only a getter
 * exports.fireEvent = fireEvent
 */
export { fireEvent, buildQueries, getByLabelText, getAllByLabelText, queryByLabelText, queryAllByLabelText, findByLabelText, findAllByLabelText, getByPlaceholderText, getAllByPlaceholderText, queryByPlaceholderText, queryAllByPlaceholderText, findByPlaceholderText, findAllByPlaceholderText, getByText, getAllByText, queryByText, queryAllByText, findByText, findAllByText, getByAltText, getAllByAltText, queryByAltText, queryAllByAltText, findByAltText, findAllByAltText, getByTitle, getAllByTitle, queryByTitle, queryAllByTitle, findByTitle, findAllByTitle, getByDisplayValue, getAllByDisplayValue, queryByDisplayValue, queryAllByDisplayValue, findByDisplayValue, findAllByDisplayValue, getByRole, getAllByRole, queryByRole, queryAllByRole, findByRole, findAllByRole, getByTestId, getAllByTestId, queryByTestId, queryAllByTestId, findByTestId, findAllByTestId, createEvent, getDefaultNormalizer, getElementError, getNodeText, getQueriesForElement, getRoles, isInaccessible, logDOM, logRoles, prettyDOM, queries, queryAllByAttribute, queryByAttribute, queryHelpers, within, } from '@testing-library/dom';
// export patched dtl
export { screen, waitFor, waitForElementToBeRemoved };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdGluZy1saWJyYXJ5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdGVzdGluZy1saWJyYXJ5L3NyYy9saWIvdGVzdGluZy1saWJyYXJ5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU8sRUFDTCxpQkFBaUIsRUFDakIsU0FBUyxFQUVULE1BQU0sRUFDTixZQUFZLEVBR1oscUJBQXFCLEdBQ3RCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBb0IsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3hFLE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUNyRyxPQUFPLEVBQW9CLE1BQU0sRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzNELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQzlELE9BQU8sRUFDTCxvQkFBb0IsSUFBSSx1QkFBdUIsRUFDL0MsU0FBUyxJQUFJLFlBQVksRUFDekIsT0FBTyxJQUFJLFVBQVUsRUFDckIseUJBQXlCLElBQUksNEJBQTRCLEVBQ3pELE1BQU0sSUFBSSxTQUFTLEVBRW5CLFNBQVMsSUFBSSxZQUFZLEdBQzFCLE1BQU0sc0JBQXNCLENBQUM7QUFFOUIsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUVyQyxNQUFNLGVBQWUsR0FBRyxJQUFJLEdBQUcsRUFBeUIsQ0FBQztBQUN6RCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFrQjdDLE1BQU0sVUFBZ0IsTUFBTSxDQUMxQixHQUEyQixFQUMzQixnQkFHeUMsRUFBRTs7UUFFM0MsTUFBTSxLQUFzQyxTQUFT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LGNBQWMsRUFDZCxpQkFBaUIsRUFDakIsYUFBYSxFQUNiLGdCQUFnQixFQUNoQixVQUFVLEVBQ1YsYUFBYSxFQUNiLFlBQVksRUFDWixlQUFlLEVBQ2YsV0FBVyxFQUNYLGNBQWMsRUFDZCxpQkFBaUIsRUFDakIsb0JBQW9CLEVBQ3BCLG1CQUFtQixFQUNuQixzQkFBc0IsRUFDdEIsa0JBQWtCLEVBQ2xCLHFCQUFxQixFQUNyQixTQUFTLEVBQ1QsWUFBWSxFQUNaLFdBQVcsRUFDWCxjQUFjLEVBQ2QsVUFBVSxFQUNWLGFBQWEsRUFDYixXQUFXLEVBQ1gsY0FBYyxFQUNkLGFBQWEsRUFDYixnQkFBZ0IsRUFDaEIsWUFBWSxFQUNaLGVBQWUsRUFDZixXQUFXLEVBQ1gsb0JBQW9CLEVBQ3BCLGVBQWUsRUFDZixXQUFXLEVBQ1gsb0JBQW9CLEVBQ3BCLFFBQVEsRUFDUixjQUFjLEVBQ2QsTUFBTSxFQUNOLFFBQVEsRUFDUixTQUFTLEVBQ1QsT0FBTyxFQUNQLG1CQUFtQixFQUNuQixnQkFBZ0IsRUFDaEIsWUFBWSxFQUNaLE1BQU0sR0FDUCxNQUFNLHNCQUFzQixDQUFDO0FBRTlCLHFCQUFxQjtBQUNyQixPQUFPLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgVHlwZSxcbiAgTmdab25lLFxuICBTaW1wbGVDaGFuZ2UsXG4gIE9uQ2hhbmdlcyxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgQXBwbGljYXRpb25Jbml0U3RhdHVzLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbXBvbmVudEZpeHR1cmUsIFRlc3RCZWQsIHRpY2sgfSBmcm9tICdAYW5ndWxhci9jb3JlL3Rlc3RpbmcnO1xuaW1wb3J0IHsgQnkgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcbmltcG9ydCB7IEJyb3dzZXJBbmltYXRpb25zTW9kdWxlLCBOb29wQW5pbWF0aW9uc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQgeyBOYXZpZ2F0aW9uRXh0cmFzLCBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgUm91dGVyVGVzdGluZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlci90ZXN0aW5nJztcbmltcG9ydCB7XG4gIGdldFF1ZXJpZXNGb3JFbGVtZW50IGFzIGR0bEdldFF1ZXJpZXNGb3JFbGVtZW50LFxuICBwcmV0dHlET00gYXMgZHRsUHJldHR5RE9NLFxuICB3YWl0Rm9yIGFzIGR0bFdhaXRGb3IsXG4gIHdhaXRGb3JFbGVtZW50VG9CZVJlbW92ZWQgYXMgZHRsV2FpdEZvckVsZW1lbnRUb0JlUmVtb3ZlZCxcbiAgc2NyZWVuIGFzIGR0bFNjcmVlbixcbiAgd2FpdEZvck9wdGlvbnMgYXMgZHRsV2FpdEZvck9wdGlvbnMsXG4gIGNvbmZpZ3VyZSBhcyBkdGxDb25maWd1cmUsXG59IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvZG9tJztcbmltcG9ydCB7IFJlbmRlckNvbXBvbmVudE9wdGlvbnMsIFJlbmRlckRpcmVjdGl2ZU9wdGlvbnMsIFJlbmRlclRlbXBsYXRlT3B0aW9ucywgUmVuZGVyUmVzdWx0IH0gZnJvbSAnLi9tb2RlbHMnO1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuXG5jb25zdCBtb3VudGVkRml4dHVyZXMgPSBuZXcgU2V0PENvbXBvbmVudEZpeHR1cmU8YW55Pj4oKTtcbmNvbnN0IGluamVjdCA9IFRlc3RCZWQuaW5qZWN0IHx8IFRlc3RCZWQuZ2V0O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyPENvbXBvbmVudFR5cGU+KFxuICBjb21wb25lbnQ6IFR5cGU8Q29tcG9uZW50VHlwZT4sXG4gIHJlbmRlck9wdGlvbnM/OiBSZW5kZXJDb21wb25lbnRPcHRpb25zPENvbXBvbmVudFR5cGU+LFxuKTogUHJvbWlzZTxSZW5kZXJSZXN1bHQ8Q29tcG9uZW50VHlwZSwgQ29tcG9uZW50VHlwZT4+O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgYHJlbmRlcih0ZW1wbGF0ZSwgeyBkZWNsYXJhdGlvbnM6IFtEaXJlY3RpdmVUeXBlXSB9KWAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlcjxEaXJlY3RpdmVUeXBlLCBXcmFwcGVyVHlwZSA9IFdyYXBwZXJDb21wb25lbnQ+KFxuICBjb21wb25lbnQ6IFR5cGU8RGlyZWN0aXZlVHlwZT4sXG4gIHJlbmRlck9wdGlvbnM/OiBSZW5kZXJEaXJlY3RpdmVPcHRpb25zPFdyYXBwZXJUeXBlPixcbik6IFByb21pc2U8UmVuZGVyUmVzdWx0PFdyYXBwZXJUeXBlPj47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyPFdyYXBwZXJUeXBlID0gV3JhcHBlckNvbXBvbmVudD4oXG4gIHRlbXBsYXRlOiBzdHJpbmcsXG4gIHJlbmRlck9wdGlvbnM/OiBSZW5kZXJUZW1wbGF0ZU9wdGlvbnM8V3JhcHBlclR5cGU+LFxuKTogUHJvbWlzZTxSZW5kZXJSZXN1bHQ8V3JhcHBlclR5cGU+PjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlcjxTdXRUeXBlLCBXcmFwcGVyVHlwZSA9IFN1dFR5cGU+KFxuICBzdXQ6IFR5cGU8U3V0VHlwZT4gfCBzdHJpbmcsXG4gIHJlbmRlck9wdGlvbnM6XG4gICAgfCBSZW5kZXJDb21wb25lbnRPcHRpb25zPFN1dFR5cGU+XG4gICAgfCBSZW5kZXJEaXJlY3RpdmVPcHRpb25zPFdyYXBwZXJUeXBlPlxuICAgIHwgUmVuZGVyVGVtcGxhdGVPcHRpb25zPFdyYXBwZXJUeXBlPiA9IHt9LFxuKTogUHJvbWlzZTxSZW5kZXJSZXN1bHQ8U3V0VHlwZT4+IHtcbiAgY29uc3QgeyBkb206IGRvbUNvbmZpZywgLi4uZ2xvYmFsQ29uZmlnIH0gPSBnZXRDb25maWcoKTtcbiAgY29uc3Qge1xuICAgIGRldGVjdENoYW5nZXM6IGRldGVjdENoYW5nZXNPblJlbmRlciA9IHRydWUsXG4gICAgZGVjbGFyYXRpb25zID0gW10sXG4gICAgaW1wb3J0cyA9IFtdLFxuICAgIHByb3ZpZGVycyA9IFtdLFxuICAgIHNjaGVtYXMgPSBbXSxcbiAgICBxdWVyaWVzLFxuICAgIHRlbXBsYXRlID0gdW5kZWZpbmVkLFxuICAgIHdyYXBwZXIgPSBXcmFwcGVyQ29tcG9uZW50LFxuICAgIGNvbXBvbmVudFByb3BlcnRpZXMgPSB7fSxcbiAgICBjb21wb25lbnRQcm92aWRlcnMgPSBbXSxcbiAgICBleGNsdWRlQ29tcG9uZW50RGVjbGFyYXRpb24gPSBmYWxzZSxcbiAgICByb3V0ZXMsXG4gICAgcmVtb3ZlQW5ndWxhckF0dHJpYnV0ZXMgPSBmYWxzZSxcbiAgICBkZWZhdWx0SW1wb3J0cyA9IFtdLFxuICB9ID0geyAuLi5nbG9iYWxDb25maWcsIC4uLnJlbmRlck9wdGlvbnMgfTtcblxuICBkdGxDb25maWd1cmUoe1xuICAgIGV2ZW50V3JhcHBlcjogKGNiKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBjYigpO1xuICAgICAgZGV0ZWN0Q2hhbmdlc0Zvck1vdW50ZWRGaXh0dXJlcygpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuICAgIC4uLmRvbUNvbmZpZyxcbiAgfSk7XG5cbiAgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHtcbiAgICBkZWNsYXJhdGlvbnM6IGFkZEF1dG9EZWNsYXJhdGlvbnMoc3V0LCB7XG4gICAgICBkZWNsYXJhdGlvbnMsXG4gICAgICBleGNsdWRlQ29tcG9uZW50RGVjbGFyYXRpb24sXG4gICAgICB0ZW1wbGF0ZSxcbiAgICAgIHdyYXBwZXIsXG4gICAgfSksXG4gICAgaW1wb3J0czogYWRkQXV0b0ltcG9ydHMoe1xuICAgICAgaW1wb3J0czogaW1wb3J0cy5jb25jYXQoZGVmYXVsdEltcG9ydHMpLFxuICAgICAgcm91dGVzLFxuICAgIH0pLFxuICAgIHByb3ZpZGVyczogWy4uLnByb3ZpZGVyc10sXG4gICAgc2NoZW1hczogWy4uLnNjaGVtYXNdLFxuICB9KTtcblxuICBpZiAoY29tcG9uZW50UHJvdmlkZXJzKSB7XG4gICAgY29tcG9uZW50UHJvdmlkZXJzXG4gICAgICAucmVkdWNlKChhY2MsIHByb3ZpZGVyKSA9PiBhY2MuY29uY2F0KHByb3ZpZGVyKSwgW10pXG4gICAgICAuZm9yRWFjaCgocCkgPT4ge1xuICAgICAgICBjb25zdCB7IHByb3ZpZGUsIC4uLnByb3ZpZGVyIH0gPSBwO1xuICAgICAgICBUZXN0QmVkLm92ZXJyaWRlUHJvdmlkZXIocHJvdmlkZSwgcHJvdmlkZXIpO1xuICAgICAgfSk7XG4gIH1cblxuICBjb25zdCBmaXh0dXJlID0gYXdhaXQgY3JlYXRlQ29tcG9uZW50Rml4dHVyZShzdXQsIHsgdGVtcGxhdGUsIHdyYXBwZXIgfSk7XG4gIHNldENvbXBvbmVudFByb3BlcnRpZXMoZml4dHVyZSwgeyBjb21wb25lbnRQcm9wZXJ0aWVzIH0pO1xuXG4gIGlmIChyZW1vdmVBbmd1bGFyQXR0cmlidXRlcykge1xuICAgIGZpeHR1cmUubmF0aXZlRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ25nLXZlcnNpb24nKTtcbiAgICBjb25zdCBpZEF0dHJpYnV0ZSA9IGZpeHR1cmUubmF0aXZlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgaWYgKGlkQXR0cmlidXRlICYmIGlkQXR0cmlidXRlLnN0YXJ0c1dpdGgoJ3Jvb3QnKSkge1xuICAgICAgZml4dHVyZS5uYXRpdmVFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICB9XG4gIH1cblxuICBtb3VudGVkRml4dHVyZXMuYWRkKGZpeHR1cmUpO1xuXG4gIGF3YWl0IFRlc3RCZWQuY29tcGlsZUNvbXBvbmVudHMoKTtcblxuICBsZXQgaXNBbGl2ZSA9IHRydWU7XG4gIGZpeHR1cmUuY29tcG9uZW50UmVmLm9uRGVzdHJveSgoKSA9PiAoaXNBbGl2ZSA9IGZhbHNlKSk7XG5cbiAgZnVuY3Rpb24gZGV0ZWN0Q2hhbmdlcygpIHtcbiAgICBpZiAoaXNBbGl2ZSkge1xuICAgICAgZml4dHVyZS5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2FsbCBuZ09uQ2hhbmdlcyBvbiBpbml0aWFsIHJlbmRlclxuICBpZiAoaGFzT25DaGFuZ2VzSG9vayhmaXh0dXJlLmNvbXBvbmVudEluc3RhbmNlKSkge1xuICAgIGNvbnN0IGNoYW5nZXMgPSBnZXRDaGFuZ2VzT2JqKG51bGwsIGNvbXBvbmVudFByb3BlcnRpZXMpO1xuICAgIGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2UubmdPbkNoYW5nZXMoY2hhbmdlcyk7XG4gIH1cblxuICBpZiAoZGV0ZWN0Q2hhbmdlc09uUmVuZGVyKSB7XG4gICAgZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgY29uc3QgcmVyZW5kZXIgPSAocmVyZW5kZXJlZFByb3BlcnRpZXM6IFBhcnRpYWw8U3V0VHlwZT4pID0+IHtcbiAgICBjb25zdCBjaGFuZ2VzID0gZ2V0Q2hhbmdlc09iaihmaXh0dXJlLmNvbXBvbmVudEluc3RhbmNlLCByZXJlbmRlcmVkUHJvcGVydGllcyk7XG5cbiAgICBzZXRDb21wb25lbnRQcm9wZXJ0aWVzKGZpeHR1cmUsIHsgY29tcG9uZW50UHJvcGVydGllczogcmVyZW5kZXJlZFByb3BlcnRpZXMgfSk7XG5cbiAgICBpZiAoaGFzT25DaGFuZ2VzSG9vayhmaXh0dXJlLmNvbXBvbmVudEluc3RhbmNlKSkge1xuICAgICAgZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZS5uZ09uQ2hhbmdlcyhjaGFuZ2VzKTtcbiAgICB9XG5cbiAgICBmaXh0dXJlLmNvbXBvbmVudFJlZi5pbmplY3Rvci5nZXQoQ2hhbmdlRGV0ZWN0b3JSZWYpLmRldGVjdENoYW5nZXMoKTtcbiAgfTtcblxuICBsZXQgcm91dGVyID0gcm91dGVzID8gaW5qZWN0KFJvdXRlcikgOiBudWxsO1xuICBjb25zdCB6b25lID0gaW5qZWN0KE5nWm9uZSk7XG4gIGNvbnN0IG5hdmlnYXRlID0gYXN5bmMgKGVsZW1lbnRPclBhdGg6IEVsZW1lbnQgfCBzdHJpbmcsIGJhc2VQYXRoID0gJycpID0+IHtcbiAgICBpZiAoIXJvdXRlcikge1xuICAgICAgcm91dGVyID0gaW5qZWN0KFJvdXRlcik7XG4gICAgfVxuXG4gICAgY29uc3QgaHJlZiA9IHR5cGVvZiBlbGVtZW50T3JQYXRoID09PSAnc3RyaW5nJyA/IGVsZW1lbnRPclBhdGggOiBlbGVtZW50T3JQYXRoLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIGNvbnN0IFtwYXRoLCBwYXJhbXNdID0gKGJhc2VQYXRoICsgaHJlZikuc3BsaXQoJz8nKTtcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHBhcmFtc1xuICAgICAgPyBwYXJhbXMuc3BsaXQoJyYnKS5yZWR1Y2UoKHFwLCBxKSA9PiB7XG4gICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gcS5zcGxpdCgnPScpO1xuICAgICAgICAgIC8vIFRPRE8oQnJlYWtpbmcpOiBncm91cCBzYW1lIGtleXMgcXBba2V5XSA/IFsuLi5xcFtrZXldLCB2YWx1ZV0gOiB2YWx1ZVxuICAgICAgICAgIHFwW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm4gcXA7XG4gICAgICAgIH0sIHt9KVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBuYXZpZ2F0ZU9wdGlvbnM6IE5hdmlnYXRpb25FeHRyYXMgPSBxdWVyeVBhcmFtc1xuICAgICAgPyB7XG4gICAgICAgICAgcXVlcnlQYXJhbXMsXG4gICAgICAgIH1cbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgZG9OYXZpZ2F0ZSA9ICgpID0+IChuYXZpZ2F0ZU9wdGlvbnMgPyByb3V0ZXIubmF2aWdhdGUoW3BhdGhdLCBuYXZpZ2F0ZU9wdGlvbnMpIDogcm91dGVyLm5hdmlnYXRlKFtwYXRoXSkpO1xuXG4gICAgbGV0IHJlc3VsdDtcblxuICAgIGlmICh6b25lKSB7XG4gICAgICBhd2FpdCB6b25lLnJ1bigoKSA9PiAocmVzdWx0ID0gZG9OYXZpZ2F0ZSgpKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IGRvTmF2aWdhdGUoKTtcbiAgICB9XG5cbiAgICBkZXRlY3RDaGFuZ2VzKCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGZpeHR1cmUsXG4gICAgZGV0ZWN0Q2hhbmdlcyxcbiAgICBuYXZpZ2F0ZSxcbiAgICByZXJlbmRlcixcbiAgICBkZWJ1Z0VsZW1lbnQ6IHR5cGVvZiBzdXQgPT09ICdzdHJpbmcnID8gZml4dHVyZS5kZWJ1Z0VsZW1lbnQgOiBmaXh0dXJlLmRlYnVnRWxlbWVudC5xdWVyeShCeS5kaXJlY3RpdmUoc3V0KSksXG4gICAgY29udGFpbmVyOiBmaXh0dXJlLm5hdGl2ZUVsZW1lbnQsXG4gICAgZGVidWc6IChlbGVtZW50ID0gZml4dHVyZS5uYXRpdmVFbGVtZW50LCBtYXhMZW5ndGgsIG9wdGlvbnMpID0+XG4gICAgICBBcnJheS5pc0FycmF5KGVsZW1lbnQpXG4gICAgICAgID8gZWxlbWVudC5mb3JFYWNoKChlKSA9PiBjb25zb2xlLmxvZyhkdGxQcmV0dHlET00oZSwgbWF4TGVuZ3RoLCBvcHRpb25zKSkpXG4gICAgICAgIDogY29uc29sZS5sb2coZHRsUHJldHR5RE9NKGVsZW1lbnQsIG1heExlbmd0aCwgb3B0aW9ucykpLFxuICAgIC4uLnJlcGxhY2VGaW5kV2l0aEZpbmRBbmREZXRlY3RDaGFuZ2VzKGR0bEdldFF1ZXJpZXNGb3JFbGVtZW50KGZpeHR1cmUubmF0aXZlRWxlbWVudCwgcXVlcmllcykpLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQ8U3V0VHlwZT4oY29tcG9uZW50OiBUeXBlPFN1dFR5cGU+KTogUHJvbWlzZTxDb21wb25lbnRGaXh0dXJlPFN1dFR5cGU+PiB7XG4gIC8qIE1ha2Ugc3VyZSBhbmd1bGFyIGFwcGxpY2F0aW9uIGlzIGluaXRpYWxpemVkIGJlZm9yZSBjcmVhdGluZyBjb21wb25lbnQgKi9cbiAgYXdhaXQgaW5qZWN0KEFwcGxpY2F0aW9uSW5pdFN0YXR1cykuZG9uZVByb21pc2U7XG4gIHJldHVybiBUZXN0QmVkLmNyZWF0ZUNvbXBvbmVudChjb21wb25lbnQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnRGaXh0dXJlPFN1dFR5cGU+KFxuICBzdXQ6IFR5cGU8U3V0VHlwZT4gfCBzdHJpbmcsXG4gIHsgdGVtcGxhdGUsIHdyYXBwZXIgfTogUGljazxSZW5kZXJEaXJlY3RpdmVPcHRpb25zPGFueT4sICd0ZW1wbGF0ZScgfCAnd3JhcHBlcic+LFxuKTogUHJvbWlzZTxDb21wb25lbnRGaXh0dXJlPFN1dFR5cGU+PiB7XG4gIGlmICh0eXBlb2Ygc3V0ID09PSAnc3RyaW5nJykge1xuICAgIFRlc3RCZWQub3ZlcnJpZGVUZW1wbGF0ZSh3cmFwcGVyLCBzdXQpO1xuICAgIHJldHVybiBjcmVhdGVDb21wb25lbnQod3JhcHBlcik7XG4gIH1cbiAgaWYgKHRlbXBsYXRlKSB7XG4gICAgVGVzdEJlZC5vdmVycmlkZVRlbXBsYXRlKHdyYXBwZXIsIHRlbXBsYXRlKTtcbiAgICByZXR1cm4gY3JlYXRlQ29tcG9uZW50KHdyYXBwZXIpO1xuICB9XG4gIHJldHVybiBjcmVhdGVDb21wb25lbnQoc3V0KTtcbn1cblxuZnVuY3Rpb24gc2V0Q29tcG9uZW50UHJvcGVydGllczxTdXRUeXBlPihcbiAgZml4dHVyZTogQ29tcG9uZW50Rml4dHVyZTxTdXRUeXBlPixcbiAgeyBjb21wb25lbnRQcm9wZXJ0aWVzID0ge30gfTogUGljazxSZW5kZXJEaXJlY3RpdmVPcHRpb25zPFN1dFR5cGUsIGFueT4sICdjb21wb25lbnRQcm9wZXJ0aWVzJz4sXG4pIHtcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoY29tcG9uZW50UHJvcGVydGllcykpIHtcbiAgICBjb25zdCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFxuICAgICAgZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXG4gICAgICBrZXksXG4gICAgKTtcbiAgICBsZXQgX3ZhbHVlID0gY29tcG9uZW50UHJvcGVydGllc1trZXldO1xuICAgIGNvbnN0IGRlZmF1bHRHZXR0ZXIgPSAoKSA9PiBfdmFsdWU7XG4gICAgY29uc3QgZXh0ZW5kZWRTZXR0ZXIgPSAodmFsdWUpID0+IHtcbiAgICAgIF92YWx1ZSA9IHZhbHVlO1xuICAgICAgZGVzY3JpcHRvcj8uc2V0Py5jYWxsKGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2UsIF92YWx1ZSk7XG4gICAgICBmaXh0dXJlLmRldGVjdENoYW5nZXMoKTtcbiAgICB9O1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2UsIGtleSwge1xuICAgICAgZ2V0OiBkZXNjcmlwdG9yPy5nZXQgfHwgZGVmYXVsdEdldHRlcixcbiAgICAgIHNldDogZXh0ZW5kZWRTZXR0ZXIsXG4gICAgICAvLyBBbGxvdyB0aGUgcHJvcGVydHkgdG8gYmUgZGVmaW5lZCBhZ2FpbiBsYXRlci5cbiAgICAgIC8vIFRoaXMgaGFwcGVucyB3aGVuIHRoZSBjb21wb25lbnQgcHJvcGVydGllcyBhcmUgdXBkYXRlZCBhZnRlciBpbml0aWFsIHJlbmRlci5cbiAgICAgIC8vIEZvciBKZXN0IHRoaXMgaXMgYHRydWVgIGJ5IGRlZmF1bHQsIGZvciBLYXJtYSBhbmQgYSByZWFsIGJyb3dzZXIgdGhlIGRlZmF1bHQgaXMgYGZhbHNlYFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgZGVzY3JpcHRvcj8uc2V0Py5jYWxsKGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2UsIF92YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGZpeHR1cmU7XG59XG5cbmZ1bmN0aW9uIGhhc09uQ2hhbmdlc0hvb2s8U3V0VHlwZT4oY29tcG9uZW50SW5zdGFuY2U6IFN1dFR5cGUpOiBjb21wb25lbnRJbnN0YW5jZSBpcyBTdXRUeXBlICYgT25DaGFuZ2VzIHtcbiAgcmV0dXJuIChcbiAgICAnbmdPbkNoYW5nZXMnIGluIGNvbXBvbmVudEluc3RhbmNlICYmIHR5cGVvZiAoY29tcG9uZW50SW5zdGFuY2UgYXMgU3V0VHlwZSAmIE9uQ2hhbmdlcykubmdPbkNoYW5nZXMgPT09ICdmdW5jdGlvbidcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2hhbmdlc09iajxTdXRUeXBlPihvbGRQcm9wczogUGFydGlhbDxTdXRUeXBlPiB8IG51bGwsIG5ld1Byb3BzOiBQYXJ0aWFsPFN1dFR5cGU+KSB7XG4gIGNvbnN0IGlzRmlyc3RDaGFuZ2UgPSBvbGRQcm9wcyA9PT0gbnVsbDtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG5ld1Byb3BzKS5yZWR1Y2U8U2ltcGxlQ2hhbmdlcz4oXG4gICAgKGNoYW5nZXMsIGtleSkgPT4gKHtcbiAgICAgIC4uLmNoYW5nZXMsXG4gICAgICBba2V5XTogbmV3IFNpbXBsZUNoYW5nZShpc0ZpcnN0Q2hhbmdlID8gbnVsbCA6IG9sZFByb3BzW2tleV0sIG5ld1Byb3BzW2tleV0sIGlzRmlyc3RDaGFuZ2UpLFxuICAgIH0pLFxuICAgIHt9LFxuICApO1xufVxuXG5mdW5jdGlvbiBhZGRBdXRvRGVjbGFyYXRpb25zPFN1dFR5cGU+KFxuICBzdXQ6IFR5cGU8U3V0VHlwZT4gfCBzdHJpbmcsXG4gIHtcbiAgICBkZWNsYXJhdGlvbnMsXG4gICAgZXhjbHVkZUNvbXBvbmVudERlY2xhcmF0aW9uLFxuICAgIHRlbXBsYXRlLFxuICAgIHdyYXBwZXIsXG4gIH06IFBpY2s8UmVuZGVyRGlyZWN0aXZlT3B0aW9uczxhbnk+LCAnZGVjbGFyYXRpb25zJyB8ICdleGNsdWRlQ29tcG9uZW50RGVjbGFyYXRpb24nIHwgJ3RlbXBsYXRlJyB8ICd3cmFwcGVyJz4sXG4pIHtcbiAgaWYgKHR5cGVvZiBzdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIFsuLi5kZWNsYXJhdGlvbnMsIHdyYXBwZXJdO1xuICB9XG5cbiAgY29uc3Qgd3JhcHBlcnMgPSAoKSA9PiAodGVtcGxhdGUgPyBbd3JhcHBlcl0gOiBbXSk7XG5cbiAgY29uc3QgY29tcG9uZW50cyA9ICgpID0+IChleGNsdWRlQ29tcG9uZW50RGVjbGFyYXRpb24gPyBbXSA6IFtzdXRdKTtcblxuICByZXR1cm4gWy4uLmRlY2xhcmF0aW9ucywgLi4ud3JhcHBlcnMoKSwgLi4uY29tcG9uZW50cygpXTtcbn1cblxuZnVuY3Rpb24gYWRkQXV0b0ltcG9ydHMoeyBpbXBvcnRzLCByb3V0ZXMgfTogUGljazxSZW5kZXJDb21wb25lbnRPcHRpb25zPGFueT4sICdpbXBvcnRzJyB8ICdyb3V0ZXMnPikge1xuICBjb25zdCBhbmltYXRpb25zID0gKCkgPT4ge1xuICAgIGNvbnN0IGFuaW1hdGlvbklzRGVmaW5lZCA9XG4gICAgICBpbXBvcnRzLmluZGV4T2YoTm9vcEFuaW1hdGlvbnNNb2R1bGUpID4gLTEgfHwgaW1wb3J0cy5pbmRleE9mKEJyb3dzZXJBbmltYXRpb25zTW9kdWxlKSA+IC0xO1xuICAgIHJldHVybiBhbmltYXRpb25Jc0RlZmluZWQgPyBbXSA6IFtOb29wQW5pbWF0aW9uc01vZHVsZV07XG4gIH07XG5cbiAgY29uc3Qgcm91dGluZyA9ICgpID0+IChyb3V0ZXMgPyBbUm91dGVyVGVzdGluZ01vZHVsZS53aXRoUm91dGVzKHJvdXRlcyldIDogW10pO1xuXG4gIHJldHVybiBbLi4uaW1wb3J0cywgLi4uYW5pbWF0aW9ucygpLCAuLi5yb3V0aW5nKCldO1xufVxuXG4vKipcbiAqIFdyYXAgd2FpdEZvciB0byBpbnZva2UgdGhlIEFuZ3VsYXIgY2hhbmdlIGRldGVjdGlvbiBjeWNsZSBiZWZvcmUgaW52b2tpbmcgdGhlIGNhbGxiYWNrXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JXcmFwcGVyPFQ+KFxuICBkZXRlY3RDaGFuZ2VzOiAoKSA9PiB2b2lkLFxuICBjYWxsYmFjazogKCkgPT4gVCBleHRlbmRzIFByb21pc2U8YW55PiA/IG5ldmVyIDogVCxcbiAgb3B0aW9ucz86IGR0bFdhaXRGb3JPcHRpb25zLFxuKTogUHJvbWlzZTxUPiB7XG4gIGxldCBpbkZha2VBc3luYyA9IHRydWU7XG4gIHRyeSB7XG4gICAgdGljaygwKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaW5GYWtlQXN5bmMgPSBmYWxzZTtcbiAgfVxuXG4gIGRldGVjdENoYW5nZXMoKTtcblxuICByZXR1cm4gYXdhaXQgZHRsV2FpdEZvcigoKSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiBkZXRlY3RDaGFuZ2VzKCksIDApO1xuICAgIGlmIChpbkZha2VBc3luYykge1xuICAgICAgdGljaygwKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gIH0sIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIFdyYXAgd2FpdEZvckVsZW1lbnRUb0JlUmVtb3ZlZFdyYXBwZXIgdG8gcG9rZSB0aGUgQW5ndWxhciBjaGFuZ2UgZGV0ZWN0aW9uIGN5Y2xlIGJlZm9yZSBpbnZva2luZyB0aGUgY2FsbGJhY2tcbiAqL1xuYXN5bmMgZnVuY3Rpb24gd2FpdEZvckVsZW1lbnRUb0JlUmVtb3ZlZFdyYXBwZXI8VD4oXG4gIGRldGVjdENoYW5nZXM6ICgpID0+IHZvaWQsXG4gIGNhbGxiYWNrOiAoKCkgPT4gVCkgfCBULFxuICBvcHRpb25zPzogZHRsV2FpdEZvck9wdGlvbnMsXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgbGV0IGNiO1xuICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc3QgZWxlbWVudHMgPSAoQXJyYXkuaXNBcnJheShjYWxsYmFjaykgPyBjYWxsYmFjayA6IFtjYWxsYmFja10pIGFzIEVsZW1lbnRbXTtcbiAgICBjb25zdCBnZXRSZW1haW5pbmdFbGVtZW50cyA9IGVsZW1lbnRzLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgbGV0IHBhcmVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgIHdoaWxlIChwYXJlbnQucGFyZW50RWxlbWVudCkge1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoKSA9PiAocGFyZW50LmNvbnRhaW5zKGVsZW1lbnQpID8gZWxlbWVudCA6IG51bGwpO1xuICAgIH0pO1xuICAgIGNiID0gKCkgPT4gZ2V0UmVtYWluaW5nRWxlbWVudHMubWFwKChjKSA9PiBjKCkpLmZpbHRlcihCb29sZWFuKTtcbiAgfSBlbHNlIHtcbiAgICBjYiA9IGNhbGxiYWNrO1xuICB9XG5cbiAgcmV0dXJuIGF3YWl0IGR0bFdhaXRGb3JFbGVtZW50VG9CZVJlbW92ZWQoKCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGNiKCk7XG4gICAgZGV0ZWN0Q2hhbmdlcygpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sIG9wdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBjbGVhbnVwKCkge1xuICBtb3VudGVkRml4dHVyZXMuZm9yRWFjaChjbGVhbnVwQXRGaXh0dXJlKTtcbn1cblxuZnVuY3Rpb24gY2xlYW51cEF0Rml4dHVyZShmaXh0dXJlKSB7XG4gIGZpeHR1cmUuZGVzdHJveSgpO1xuXG4gIGlmICghZml4dHVyZS5uYXRpdmVFbGVtZW50LmdldEF0dHJpYnV0ZSgnbmctdmVyc2lvbicpICYmIGZpeHR1cmUubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChmaXh0dXJlLm5hdGl2ZUVsZW1lbnQpO1xuICB9XG4gIG1vdW50ZWRGaXh0dXJlcy5kZWxldGUoZml4dHVyZSk7XG59XG5cbi8vIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSB0ZXN0IHJ1bm5lciB0aGF0IHN1cHBvcnRzIGFmdGVyRWFjaFxuLy8gdGhlbiB3ZSdsbCBhdXRvbWF0aWNhbGx5IHJ1biBjbGVhbnVwIGFmdGVyRWFjaCB0ZXN0XG4vLyB0aGlzIGVuc3VyZXMgdGhhdCB0ZXN0cyBydW4gaW4gaXNvbGF0aW9uIGZyb20gZWFjaCBvdGhlclxuLy8gaWYgeW91IGRvbid0IGxpa2UgdGhpcywgc2V0IHRoZSBBVExfU0tJUF9BVVRPX0NMRUFOVVAgZW52IHZhcmlhYmxlIHRvICd0cnVlJ1xuaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCAhcHJvY2Vzcy5lbnY/LkFUTF9TS0lQX0FVVE9fQ0xFQU5VUCkge1xuICBpZiAodHlwZW9mIGFmdGVyRWFjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgICBjbGVhbnVwKCk7XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gVE9ETzogcmVuYW1lIHRvIGBhdGwtd3JhcHBlci1jb21wb25lbnRgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGFuZ3VsYXItZXNsaW50L2NvbXBvbmVudC1zZWxlY3RvclxuQENvbXBvbmVudCh7IHNlbGVjdG9yOiAnd3JhcHBlci1jb21wb25lbnQnLCB0ZW1wbGF0ZTogJycgfSlcbmNsYXNzIFdyYXBwZXJDb21wb25lbnQge31cblxuLyoqXG4gKiBXcmFwIGZpbmRCeSBxdWVyaWVzIHRvIHBva2UgdGhlIEFuZ3VsYXIgY2hhbmdlIGRldGVjdGlvbiBjeWNsZVxuICovXG5mdW5jdGlvbiByZXBsYWNlRmluZFdpdGhGaW5kQW5kRGV0ZWN0Q2hhbmdlczxUPihvcmlnaW5hbFF1ZXJpZXNGb3JDb250YWluZXI6IFQpOiBUIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9yaWdpbmFsUXVlcmllc0ZvckNvbnRhaW5lcikucmVkdWNlKChuZXdRdWVyaWVzLCBrZXkpID0+IHtcbiAgICBjb25zdCBnZXRCeVF1ZXJ5ID0gb3JpZ2luYWxRdWVyaWVzRm9yQ29udGFpbmVyW2tleS5yZXBsYWNlKCdmaW5kJywgJ2dldCcpXTtcbiAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ2ZpbmQnKSAmJiBnZXRCeVF1ZXJ5KSB7XG4gICAgICBuZXdRdWVyaWVzW2tleV0gPSBhc3luYyAodGV4dCwgb3B0aW9ucywgd2FpdE9wdGlvbnMpID0+IHtcbiAgICAgICAgLy8gb3JpZ2luYWwgaW1wbGVtZW50YXRpb24gYXQgaHR0cHM6Ly9naXRodWIuY29tL3Rlc3RpbmctbGlicmFyeS9kb20tdGVzdGluZy1saWJyYXJ5L2Jsb2IvbWFpbi9zcmMvcXVlcnktaGVscGVycy5qc1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3YWl0Rm9yV3JhcHBlcihcbiAgICAgICAgICBkZXRlY3RDaGFuZ2VzRm9yTW91bnRlZEZpeHR1cmVzLFxuICAgICAgICAgICgpID0+IGdldEJ5UXVlcnkodGV4dCwgb3B0aW9ucyksXG4gICAgICAgICAgd2FpdE9wdGlvbnMsXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdRdWVyaWVzW2tleV0gPSBvcmlnaW5hbFF1ZXJpZXNGb3JDb250YWluZXJba2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3UXVlcmllcztcbiAgfSwge30gYXMgVCk7XG59XG5cbi8qKlxuICogQ2FsbCBkZXRlY3RDaGFuZ2VzIGZvciBhbGwgZml4dHVyZXNcbiAqL1xuZnVuY3Rpb24gZGV0ZWN0Q2hhbmdlc0Zvck1vdW50ZWRGaXh0dXJlcygpIHtcbiAgbW91bnRlZEZpeHR1cmVzLmZvckVhY2goKGZpeHR1cmUpID0+IHtcbiAgICB0cnkge1xuICAgICAgZml4dHVyZS5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoIWVyci5tZXNzYWdlLnN0YXJ0c1dpdGgoJ1ZpZXdEZXN0cm95ZWRFcnJvcicpKSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlLWV4cG9ydCBzY3JlZW4gd2l0aCBwYXRjaGVkIHF1ZXJpZXNcbiAqL1xuY29uc3Qgc2NyZWVuID0gcmVwbGFjZUZpbmRXaXRoRmluZEFuZERldGVjdENoYW5nZXMoZHRsU2NyZWVuKTtcblxuLyoqXG4gKiBSZS1leHBvcnQgd2FpdEZvciB3aXRoIHBhdGNoZWQgd2FpdEZvclxuICovXG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9yPFQ+KGNhbGxiYWNrOiAoKSA9PiBUIGV4dGVuZHMgUHJvbWlzZTxhbnk+ID8gbmV2ZXIgOiBULCBvcHRpb25zPzogZHRsV2FpdEZvck9wdGlvbnMpOiBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIHdhaXRGb3JXcmFwcGVyKGRldGVjdENoYW5nZXNGb3JNb3VudGVkRml4dHVyZXMsIGNhbGxiYWNrLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBSZS1leHBvcnQgd2FpdEZvckVsZW1lbnRUb0JlUmVtb3ZlZCB3aXRoIHBhdGNoZWQgd2FpdEZvckVsZW1lbnRUb0JlUmVtb3ZlZFxuICovXG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9yRWxlbWVudFRvQmVSZW1vdmVkPFQ+KGNhbGxiYWNrOiAoKCkgPT4gVCkgfCBULCBvcHRpb25zPzogZHRsV2FpdEZvck9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIHdhaXRGb3JFbGVtZW50VG9CZVJlbW92ZWRXcmFwcGVyKGRldGVjdENoYW5nZXNGb3JNb3VudGVkRml4dHVyZXMsIGNhbGxiYWNrLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBNYW51YWxseSBleHBvcnQgb3RoZXJ3aXNlIHdlIGdldCB0aGUgZm9sbG93aW5nIGVycm9yIHdoaWxlIHJ1bm5pbmcgSmVzdCB0ZXN0c1xuICogVHlwZUVycm9yOiBDYW5ub3Qgc2V0IHByb3BlcnR5IGZpcmVFdmVudCBvZiBbb2JqZWN0IE9iamVjdF0gd2hpY2ggaGFzIG9ubHkgYSBnZXR0ZXJcbiAqIGV4cG9ydHMuZmlyZUV2ZW50ID0gZmlyZUV2ZW50XG4gKi9cbmV4cG9ydCB7XG4gIGZpcmVFdmVudCxcbiAgYnVpbGRRdWVyaWVzLFxuICBnZXRCeUxhYmVsVGV4dCxcbiAgZ2V0QWxsQnlMYWJlbFRleHQsXG4gIHF1ZXJ5QnlMYWJlbFRleHQsXG4gIHF1ZXJ5QWxsQnlMYWJlbFRleHQsXG4gIGZpbmRCeUxhYmVsVGV4dCxcbiAgZmluZEFsbEJ5TGFiZWxUZXh0LFxuICBnZXRCeVBsYWNlaG9sZGVyVGV4dCxcbiAgZ2V0QWxsQnlQbGFjZWhvbGRlclRleHQsXG4gIHF1ZXJ5QnlQbGFjZWhvbGRlclRleHQsXG4gIHF1ZXJ5QWxsQnlQbGFjZWhvbGRlclRleHQsXG4gIGZpbmRCeVBsYWNlaG9sZGVyVGV4dCxcbiAgZmluZEFsbEJ5UGxhY2Vob2xkZXJUZXh0LFxuICBnZXRCeVRleHQsXG4gIGdldEFsbEJ5VGV4dCxcbiAgcXVlcnlCeVRleHQsXG4gIHF1ZXJ5QWxsQnlUZXh0LFxuICBmaW5kQnlUZXh0LFxuICBmaW5kQWxsQnlUZXh0LFxuICBnZXRCeUFsdFRleHQsXG4gIGdldEFsbEJ5QWx0VGV4dCxcbiAgcXVlcnlCeUFsdFRleHQsXG4gIHF1ZXJ5QWxsQnlBbHRUZXh0LFxuICBmaW5kQnlBbHRUZXh0LFxuICBmaW5kQWxsQnlBbHRUZXh0LFxuICBnZXRCeVRpdGxlLFxuICBnZXRBbGxCeVRpdGxlLFxuICBxdWVyeUJ5VGl0bGUsXG4gIHF1ZXJ5QWxsQnlUaXRsZSxcbiAgZmluZEJ5VGl0bGUsXG4gIGZpbmRBbGxCeVRpdGxlLFxuICBnZXRCeURpc3BsYXlWYWx1ZSxcbiAgZ2V0QWxsQnlEaXNwbGF5VmFsdWUsXG4gIHF1ZXJ5QnlEaXNwbGF5VmFsdWUsXG4gIHF1ZXJ5QWxsQnlEaXNwbGF5VmFsdWUsXG4gIGZpbmRCeURpc3BsYXlWYWx1ZSxcbiAgZmluZEFsbEJ5RGlzcGxheVZhbHVlLFxuICBnZXRCeVJvbGUsXG4gIGdldEFsbEJ5Um9sZSxcbiAgcXVlcnlCeVJvbGUsXG4gIHF1ZXJ5QWxsQnlSb2xlLFxuICBmaW5kQnlSb2xlLFxuICBmaW5kQWxsQnlSb2xlLFxuICBnZXRCeVRlc3RJZCxcbiAgZ2V0QWxsQnlUZXN0SWQsXG4gIHF1ZXJ5QnlUZXN0SWQsXG4gIHF1ZXJ5QWxsQnlUZXN0SWQsXG4gIGZpbmRCeVRlc3RJZCxcbiAgZmluZEFsbEJ5VGVzdElkLFxuICBjcmVhdGVFdmVudCxcbiAgZ2V0RGVmYXVsdE5vcm1hbGl6ZXIsXG4gIGdldEVsZW1lbnRFcnJvcixcbiAgZ2V0Tm9kZVRleHQsXG4gIGdldFF1ZXJpZXNGb3JFbGVtZW50LFxuICBnZXRSb2xlcyxcbiAgaXNJbmFjY2Vzc2libGUsXG4gIGxvZ0RPTSxcbiAgbG9nUm9sZXMsXG4gIHByZXR0eURPTSxcbiAgcXVlcmllcyxcbiAgcXVlcnlBbGxCeUF0dHJpYnV0ZSxcbiAgcXVlcnlCeUF0dHJpYnV0ZSxcbiAgcXVlcnlIZWxwZXJzLFxuICB3aXRoaW4sXG59IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvZG9tJztcblxuLy8gZXhwb3J0IHBhdGNoZWQgZHRsXG5leHBvcnQgeyBzY3JlZW4sIHdhaXRGb3IsIHdhaXRGb3JFbGVtZW50VG9CZVJlbW92ZWQgfTtcbiJdfQ==